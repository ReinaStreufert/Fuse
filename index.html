
<!-- saved from url=(0038)https://reinastreufert.github.io/Fuse/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400&display=swap" rel="stylesheet">
		<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		body {
			background: white;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		canvas {
			background: #FFFFFF;
		}
		</style>
	</head>
	<body>
		<canvas id="game" width="1000" height="800"></canvas>
		<script>
		window.onerror = function(message, source, line, col, error) {
			alert(line + ':' + col + ': ' + message);
		}
		</script>
		<script>
		var lvldata = [
			//#1: Introduction
			{"tuttext":["Start by moving your mouse to the highlighted circle","Move along the line to the ending checkpoint, follow it closely","That's it!","Great! Press space to move onto the next level"],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":false},{"x":800,"y":400,"type":"checkpoint","thickness":10,"color":0,"animation":null,"filled":false}],"fusespeed":0,"name":"#1: Introduction"},
			//#2: Under Pressure
			{"tuttext":["Careful, this time the line will burn behind you like a fuse! Outrun it to the ending checkpoint","Careful, this time the line will burn behind you like a fuse! Outrun it to the ending checkpoint","Move!","Great!"],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":30,"color":0,"animation":null},{"x":300,"y":400,"type":"midpoint","thickness":10,"color":0,"animation":null},{"x":350,"y":450,"type":"midpoint","thickness":10,"color":0,"animation":null},{"x":400,"y":350,"type":"midpoint","thickness":10,"color":0,"animation":null},{"x":450,"y":450,"type":"midpoint","thickness":10,"color":0,"animation":null},{"x":500,"y":400,"type":"midpoint","thickness":10,"color":0,"animation":null},{"x":800,"y":400,"type":"checkpoint","thickness":10,"color":0,"animation":null}],"fusespeed":200,"name":"#2: Under Pressure"},
			//#3: Life Saver
			{"tuttext":["Levels can have more than 1 checkpoint! See what happens when you fail after getting to a checkpoint in the middle","","","Great!"],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":400,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":550,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":600,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":800,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":600,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":250,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":200,"name":"#3: Life Saver"},
			//#4: Mountains
			{"tuttext":["You are ready. You're on your own for now, good luck","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":300,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":350,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":600,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":600,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":700,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":700,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":800,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":200,"name":"#4: Mountains"},
			//#5: Hourglass (sort of)
			{"tuttext":["","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":450,"y":300,"type":"midpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":450,"y":200,"type":"midpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":550,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":500,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":450,"y":600,"type":"midpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":550,"y":600,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":550,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":800,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":200,"name":"#5: Hourglass (sort of)"},
			//#6: Precision, Frustration, and Spaghetti
			{"tuttext":["Don't worry, there's no fuse","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":10,"animation":null,"filled":false,"color":0},{"x":500,"y":350,"type":"midpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":500,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":800,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":0,"name":"#6: Precision, Frustration, and Spaghetti"},
			//#7: This is Your Brain
			{"tuttext":["","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":30,"animation":null,"filled":false,"color":0},{"x":350,"y":350,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":350,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":550,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":550,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":600,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":600,"y":350,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":350,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":450,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":450,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":600,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":600,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":550,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":550,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":650,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":650,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":800,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":200,"name":"#7: This is Your Brain"},
			//#8: Are We There Yet?
			{"tuttext":["","","",""],"pts":[{"x":200,"y":175,"type":"checkpoint","thickness":30,"animation":null,"filled":false,"color":0},{"x":275,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":800,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":800,"y":600,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":200,"y":600,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":200,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":750,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":750,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":250,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":250,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":700,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":700,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":300,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":300,"y":350,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":650,"y":350,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":650,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":425,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":200,"name":"#8: Are We There Yet?"},
			//#9: No Step Off of Snek
			{"tuttext":["Watch out! Curves are a new addition that make levels just a little harder","","",""],"pts":[{"x":200,"y":450,"type":"checkpoint","thickness":30,"animation":null,"filled":true,"color":0},{"x":200,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":350,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":350,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":350,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":350,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":350,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":400,"type":"midpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":500,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":650,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":350,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0}],"fusespeed":200,"name":"#9: No Step Off of Snek"},
			//#10: Something Curly
			{"tuttext":["","","",""],"pts":[{"x":487.5,"y":387.5,"type":"checkpoint","thickness":25,"animation":null,"filled":true,"color":0},{"x":512.5,"y":387.5,"type":"curve","thickness":20,"animation":null,"color":0},{"x":625,"y":425,"type":"curve","thickness":20,"animation":null,"color":0},{"x":625,"y":225,"type":"curve","thickness":20,"animation":null,"color":0},{"x":475,"y":225,"type":"curve","thickness":20,"animation":null,"color":0},{"x":475,"y":225,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":475,"y":225,"type":"curve","thickness":20,"animation":null,"color":0},{"x":275,"y":225,"type":"curve","thickness":20,"animation":null,"color":0},{"x":275,"y":475,"type":"curve","thickness":20,"animation":null,"color":0},{"x":425,"y":525,"type":"curve","thickness":20,"animation":null,"color":0},{"x":425,"y":525,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":425,"y":525,"type":"curve","thickness":20,"animation":null,"color":0},{"x":575,"y":575,"type":"curve","thickness":20,"animation":null,"color":0},{"x":675,"y":475,"type":"curve","thickness":20,"animation":null,"color":0},{"x":675,"y":325,"type":"curve","thickness":20,"animation":null,"color":0},{"x":675,"y":325,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0}],"fusespeed":200,"name":"#10: Something Curly"},
			//#11: Cat & Mouse
			{"tuttext":["","","",""],"pts":[{"x":200,"y":200,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":200,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":350,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":350,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":350,"y":450,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":350,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":350,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":350,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":500,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":450,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":650,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":350,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":800,"y":600,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0}],"fusespeed":200,"name":"#11: Cat & Mouse"},
			//#12: Totally Tubular
			{"tuttext":["","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":225,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":425,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":675,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":525,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":425,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0}],"fusespeed":300,"name":"#12: Totally Tubular"},
			//#13: Race to the Bottom
			{"tuttext":["","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":400,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":500,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":600,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":600,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":650,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":600,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":300,"name":"#13: Race to the Bottom"},
			//#14: Light Waves
			{"tuttext":["","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":212.5,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":325,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":175,"y":750,"type":"curve","thickness":20,"animation":null,"color":0},{"x":475,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":675,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":775,"y":600,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":775,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":775,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":575,"y":650,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":375,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":225,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":225,"y":300,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":275,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":325,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":425,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":775,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":775,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":775,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":775,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":675,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":150,"type":"curve","thickness":20,"animation":null,"color":0},{"x":475,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":425,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":325,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":325,"y":250,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":200,"name":"#14: Light Waves"},
			//#15: Coils & Wires
			{"tuttext":["","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":200,"y":325,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":200,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":250,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":275,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":300,"y":275,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":325,"y":225,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":350,"y":275,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":375,"y":225,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":275,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":425,"y":225,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":450,"y":275,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":475,"y":225,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":275,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":525,"y":225,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":550,"y":275,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":575,"y":225,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":600,"y":275,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":625,"y":225,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":650,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":700,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":725,"y":325,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":775,"y":350,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":750,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":775,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":725,"y":475,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":750,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":625,"y":575,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":600,"y":525,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":575,"y":575,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":550,"y":525,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":525,"y":575,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":525,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":475,"y":575,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":450,"y":525,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":425,"y":575,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":525,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":375,"y":575,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":350,"y":525,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":325,"y":575,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":300,"y":525,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":275,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":250,"y":550,"type":"curve","thickness":20,"animation":null,"filled":false,"color":0},{"x":200,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":514.0625,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":150,"name":"#15: Coils & Wires"},
			//#16: Bumpy Road
			{"tuttext":["","","",""],"pts":[{"x":225,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":325,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":325,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":375,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":375,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":375,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":425,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":425,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":475,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":475,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":475,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":525,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":525,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":575,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":575,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":625,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":625,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":625,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":675,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":675,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":675,"y":400,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":775,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0}],"fusespeed":200,"name":"#16: Bumpy Road"},
			//#17: Just Around the Corner
			{"tuttext":["","","",""],"pts":[{"x":600,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":300,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":400,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":200,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":300,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":600,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":750,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":600,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":300,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":300,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":250,"y":550,"type":"curve","thickness":20,"animation":null,"color":0},{"x":250,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":300,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":700,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":500,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":450,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":750,"y":350,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":300,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":300,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":250,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":250,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":300,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":750,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":800,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":750,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":300,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":300,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":200,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":200,"y":350,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0}],"fusespeed":200,"name":"#17: Just Around the Corner"},
			//#18: Edgy, Not Like Other Levels
			{"tuttext":["","","",""],"pts":[{"x":400,"y":300,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":650,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":450,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":600,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":250,"y":500,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":200,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":400,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":200,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":650,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":550,"y":300,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":700,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":700,"y":550,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0}],"fusespeed":200,"name":"#18: Edgy, Not Like Other Levels"},
			//#19: Hmm.. Can't Go Around...
			{"tuttext":["Lines can crossover each other! You can't switch to a different colored line without going through a checkpoint first","Try taking a shortcut! See if it'll work...","",""],"pts":[{"x":200,"y":550,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":0},{"x":500,"y":550,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":500,"y":250,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":300,"y":250,"type":"midpoint","thickness":20,"color":1,"animation":null},{"x":300,"y":400,"type":"midpoint","thickness":20,"color":1,"animation":null},{"x":800,"y":400,"type":"checkpoint","thickness":20,"color":1,"animation":null,"filled":false}],"fusespeed":200,"name":"#19: Hmm... Can't Go Around..."},
			//#20: Keep Moving and Nobody Explodes
			{"tuttext":["","","",""],"pts":[{"x":250,"y":425,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":550,"y":425,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":550,"y":225,"type":"midpoint","thickness":20,"color":4,"animation":null},{"x":350,"y":225,"type":"midpoint","thickness":20,"color":4,"animation":null},{"x":350,"y":575,"type":"checkpoint","thickness":20,"color":4,"animation":null,"filled":false},{"x":750,"y":575,"type":"midpoint","thickness":20,"color":2,"animation":null},{"x":750,"y":325,"type":"midpoint","thickness":20,"color":2,"animation":null},{"x":450,"y":325,"type":"checkpoint","thickness":20,"color":2,"animation":null,"filled":false},{"x":450,"y":525,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":650,"y":525,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":650,"y":225,"type":"checkpoint","thickness":20,"color":3,"animation":null,"filled":false}],"fusespeed":200,"name":"#20: Keep Moving and Nobody Explodes"},
			//#21: Same Difference
			{"tuttext":["Colors can also change at the black squares. These are called switchpoints and allow color change without acting as a checkpoint.","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":500,"y":400,"type":"switch","thickness":20,"animation":null,"color":0},{"x":500,"y":250,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":300,"y":250,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":300,"y":500,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":400,"y":500,"type":"switch","thickness":20,"color":3,"animation":null},{"x":400,"y":350,"type":"midpoint","thickness":20,"color":2,"animation":null},{"x":600,"y":350,"type":"midpoint","thickness":20,"color":2,"animation":null},{"x":600,"y":400,"type":"midpoint","thickness":20,"color":2,"animation":null},{"x":800,"y":400,"type":"checkpoint","thickness":20,"color":2,"animation":null,"filled":false}],"fusespeed":200,"name":"#21: Same Difference"},
			//#22: The Level is Plagiarized
			{"tuttext":["","","",""],"pts":[{"x":500,"y":300,"type":"checkpoint","thickness":20,"animation":null,"filled":false,"color":0},{"x":650,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":300,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":250,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":700,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":700,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":650,"y":200,"type":"midpoint","thickness":20,"animation":null,"color":0},{"x":650,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":600,"y":200,"type":"curve","thickness":20,"animation":null,"color":0},{"x":600,"y":250,"type":"curve","thickness":20,"animation":null,"color":0},{"x":600,"y":250,"type":"switch","thickness":20,"animation":null,"color":0},{"x":600,"y":550,"type":"curve","thickness":20,"color":2,"animation":null},{"x":600,"y":600,"type":"curve","thickness":20,"color":2,"animation":null},{"x":650,"y":600,"type":"curve","thickness":20,"color":2,"animation":null},{"x":650,"y":600,"type":"midpoint","thickness":20,"color":2,"animation":null},{"x":650,"y":600,"type":"curve","thickness":20,"color":2,"animation":null},{"x":700,"y":600,"type":"curve","thickness":20,"color":2,"animation":null},{"x":700,"y":550,"type":"curve","thickness":20,"color":2,"animation":null},{"x":700,"y":550,"type":"midpoint","thickness":20,"color":2,"animation":null},{"x":700,"y":550,"type":"curve","thickness":20,"color":2,"animation":null},{"x":700,"y":500,"type":"curve","thickness":20,"color":2,"animation":null},{"x":650,"y":500,"type":"curve","thickness":20,"color":2,"animation":null},{"x":650,"y":500,"type":"switch","thickness":20,"color":2,"animation":null},{"x":350,"y":500,"type":"curve","thickness":20,"color":3,"animation":null},{"x":300,"y":500,"type":"curve","thickness":20,"color":3,"animation":null},{"x":300,"y":550,"type":"curve","thickness":20,"color":3,"animation":null},{"x":300,"y":550,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":300,"y":550,"type":"curve","thickness":20,"color":3,"animation":null},{"x":300,"y":600,"type":"curve","thickness":20,"color":3,"animation":null},{"x":350,"y":600,"type":"curve","thickness":20,"color":3,"animation":null},{"x":350,"y":600,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":350,"y":600,"type":"curve","thickness":20,"color":3,"animation":null},{"x":400,"y":600,"type":"curve","thickness":20,"color":3,"animation":null},{"x":400,"y":550,"type":"curve","thickness":20,"color":3,"animation":null},{"x":400,"y":550,"type":"switch","thickness":20,"color":3,"animation":null},{"x":400,"y":250,"type":"curve","thickness":20,"color":3,"animation":null},{"x":400,"y":200,"type":"curve","thickness":20,"color":3,"animation":null},{"x":350,"y":200,"type":"curve","thickness":20,"color":1,"animation":null},{"x":350,"y":200,"type":"midpoint","thickness":20,"color":1,"animation":null},{"x":350,"y":200,"type":"curve","thickness":20,"color":3,"animation":null},{"x":300,"y":200,"type":"curve","thickness":20,"color":3,"animation":null},{"x":300,"y":250,"type":"curve","thickness":20,"color":1,"animation":null},{"x":300,"y":250,"type":"midpoint","thickness":20,"color":1,"animation":null},{"x":300,"y":250,"type":"curve","thickness":20,"color":3,"animation":null},{"x":300,"y":300,"type":"curve","thickness":20,"color":3,"animation":null},{"x":350,"y":300,"type":"curve","thickness":20,"color":1,"animation":null},{"x":350,"y":300,"type":"switch","thickness":20,"color":0,"animation":null},{"x":375,"y":300,"type":"curve","thickness":20,"color":0,"animation":null},{"x":450,"y":300,"type":"curve","thickness":20,"color":3,"animation":null},{"x":400,"y":400,"type":"curve","thickness":20,"color":3,"animation":null},{"x":500,"y":425,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":425,"type":"checkpoint","thickness":20,"color":1,"animation":null,"filled":false}],"fusespeed":200,"name":"#22: This Level is Plagiarized"},
			//#23: Shoula Been #8
			{"tuttext":["","","",""],"pts":[{"x":200,"y":600,"type":"checkpoint","thickness":15,"color":0,"animation":null,"filled":true},{"x":500,"y":600,"type":"curve","thickness":20,"color":0,"animation":null},{"x":675,"y":600,"type":"curve","thickness":20,"color":0,"animation":null},{"x":675,"y":400,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":400,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":400,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":500,"y":400,"type":"curve","thickness":20,"color":0,"animation":null},{"x":350,"y":400,"type":"curve","thickness":20,"color":0,"animation":null},{"x":350,"y":200,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":200,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":200,"type":"switch","thickness":20,"color":0,"animation":null},{"x":500,"y":200,"type":"curve","thickness":20,"color":0,"animation":null},{"x":650,"y":200,"type":"curve","thickness":20,"color":1,"animation":null},{"x":650,"y":400,"type":"curve","thickness":20,"color":4,"animation":null},{"x":500,"y":400,"type":"curve","thickness":20,"color":1,"animation":null},{"x":500,"y":400,"type":"midpoint","thickness":20,"color":1,"animation":null},{"x":500,"y":400,"type":"curve","thickness":20,"color":4,"animation":null},{"x":325,"y":400,"type":"curve","thickness":20,"color":4,"animation":null},{"x":325,"y":600,"type":"curve","thickness":20,"color":4,"animation":null},{"x":500,"y":600,"type":"curve","thickness":20,"color":1,"animation":null},{"x":800,"y":600,"type":"checkpoint","thickness":20,"color":1,"animation":null,"filled":true}],"fusespeed":100,"name":"#23: Shoulda Been #8"},
			//#24: What's Where?
			{"tuttext":["","","",""],"pts":[{"x":600,"y":500,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":false},{"x":600,"y":300,"type":"switch","thickness":20,"color":1,"animation":null},{"x":400,"y":300,"type":"switch","thickness":20,"color":2,"animation":null},{"x":400,"y":500,"type":"switch","thickness":20,"color":3,"animation":null},{"x":500,"y":500,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":500,"y":400,"type":"midpoint","thickness":20,"color":3,"animation":null},{"x":700,"y":400,"type":"switch","thickness":20,"color":3,"animation":null},{"x":700,"y":200,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":500,"y":200,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":500,"y":400,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":300,"y":400,"type":"switch","thickness":20,"color":0,"animation":null},{"x":300,"y":600,"type":"midpoint","thickness":20,"color":4,"animation":null},{"x":500,"y":600,"type":"midpoint","thickness":20,"color":4,"animation":null},{"x":500,"y":250,"type":"midpoint","thickness":20,"color":4,"animation":null},{"x":300,"y":250,"type":"checkpoint","thickness":20,"color":4,"animation":null,"filled":false}],"fusespeed":200,"name":"#24: What's Where?"},
			//#25: Envelope
			{"tuttext":["","","",""],"pts":[{"x":200,"y":600,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":true},{"x":400,"y":350,"type":"curve","thickness":20,"color":0,"animation":null},{"x":437.5,"y":300,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":300,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":300,"type":"switch","thickness":20,"color":0,"animation":null},{"x":500,"y":300,"type":"curve","thickness":20,"color":0,"animation":null},{"x":562.5,"y":300,"type":"curve","thickness":20,"color":1,"animation":null},{"x":600,"y":350,"type":"curve","thickness":20,"color":1,"animation":null},{"x":800,"y":600,"type":"checkpoint","thickness":20,"color":1,"animation":null,"filled":true},{"x":800,"y":200,"type":"checkpoint","thickness":20,"color":1,"animation":null,"filled":true},{"x":600,"y":400,"type":"curve","thickness":20,"color":3,"animation":null},{"x":550,"y":450,"type":"curve","thickness":20,"color":3,"animation":null},{"x":500,"y":450,"type":"curve","thickness":20,"color":3,"animation":null},{"x":500,"y":450,"type":"switch","thickness":20,"color":3,"animation":null},{"x":500,"y":450,"type":"curve","thickness":20,"color":3,"animation":null},{"x":450,"y":450,"type":"curve","thickness":20,"color":2,"animation":null},{"x":400,"y":400,"type":"curve","thickness":20,"color":2,"animation":null},{"x":200,"y":200,"type":"checkpoint","thickness":20,"color":2,"animation":null,"filled":true},{"x":200,"y":400,"type":"checkpoint","thickness":20,"color":2,"animation":null,"filled":true}],"fusespeed":300,"name":"#25: Envelope"},
			//#26: Tangled
			{"tuttext":["","","",""],"pts":[{"x":200,"y":600,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":true},{"x":300,"y":600,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":600,"type":"curve","thickness":20,"color":0,"animation":null},{"x":500,"y":250,"type":"curve","thickness":20,"color":0,"animation":null},{"x":200,"y":250,"type":"curve","thickness":20,"color":0,"animation":null},{"x":150,"y":450,"type":"curve","thickness":20,"color":0,"animation":null},{"x":350,"y":450,"type":"curve","thickness":20,"color":3,"animation":null},{"x":350,"y":450,"type":"switch","thickness":20,"color":3,"animation":null},{"x":350,"y":450,"type":"curve","thickness":20,"color":1,"animation":null},{"x":650,"y":450,"type":"curve","thickness":20,"color":1,"animation":null},{"x":650,"y":200,"type":"curve","thickness":20,"color":1,"animation":null},{"x":250,"y":150,"type":"curve","thickness":20,"color":1,"animation":null},{"x":250,"y":325,"type":"curve","thickness":20,"color":1,"animation":null},{"x":250,"y":325,"type":"switch","thickness":20,"color":1,"animation":null},{"x":250,"y":325,"type":"curve","thickness":20,"color":2,"animation":null},{"x":250,"y":550,"type":"curve","thickness":20,"color":2,"animation":null},{"x":600,"y":550,"type":"curve","thickness":20,"color":2,"animation":null},{"x":600,"y":550,"type":"checkpoint","thickness":20,"color":2,"animation":null,"filled":true},{"x":600,"y":550,"type":"curve","thickness":20,"color":2,"animation":null},{"x":750,"y":550,"type":"curve","thickness":20,"color":0,"animation":null},{"x":750,"y":350,"type":"curve","thickness":20,"color":0,"animation":null},{"x":750,"y":350,"type":"switch","thickness":20,"color":0,"animation":null},{"x":750,"y":350,"type":"curve","thickness":20,"color":0,"animation":null},{"x":750,"y":200,"type":"curve","thickness":20,"color":4,"animation":null},{"x":550,"y":200,"type":"curve","thickness":20,"color":4,"animation":null},{"x":500,"y":400,"type":"curve","thickness":20,"color":4,"animation":null},{"x":800,"y":600,"type":"curve","thickness":20,"color":4,"animation":null},{"x":800,"y":600,"type":"checkpoint","thickness":20,"color":4,"animation":null,"filled":true}],"fusespeed":200,"name":"#26: Tangled"},
			//#27: Fast as Lightning
			{"tuttext":["","","",""],"pts":[{"x":300,"y":400,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":true},{"x":300,"y":200,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":200,"y":200,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":200,"y":600,"type":"midpoint","thickness":20,"color":0,"animation":null,"filled":false},{"x":350,"y":600,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":true},{"x":500,"y":600,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":450,"y":400,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":550,"y":400,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":500,"y":200,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":650,"y":200,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":true},{"x":800,"y":200,"type":"midpoint","thickness":20,"color":0,"animation":null,"filled":false},{"x":800,"y":600,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":700,"y":600,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":700,"y":400,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":true}],"fusespeed":300,"name":"#27: Fast as Lightning"},
			//#28: Spaghetti Bites again
			{"tuttext":["Worry, There's a fuse","","",""],"pts":[{"x":200,"y":400,"type":"checkpoint","thickness":10,"animation":null,"filled":true,"color":0},{"x":500,"y":350,"type":"midpoint","thickness":20,"animation":null,"filled":true,"color":1},{"x":500,"y":450,"type":"midpoint","thickness":20,"animation":null,"color":1},{"x":800,"y":400,"type":"checkpoint","thickness":20,"animation":null,"filled":true,"color":1}],"fusespeed":250,"name":"#28: Spaghetti Bites Again"},
			//#29: Somewhere Under the Rainbow
			{"tuttext":["","","",""],"pts":[{"x":200,"y":600,"type":"checkpoint","thickness":30,"color":0,"animation":null,"filled":true},{"x":200,"y":525,"type":"curve","thickness":20,"color":4,"animation":null},{"x":200,"y":175,"type":"curve","thickness":20,"color":4,"animation":null},{"x":800,"y":175,"type":"curve","thickness":20,"color":4,"animation":null},{"x":800,"y":525,"type":"curve","thickness":20,"color":4,"animation":null},{"x":800,"y":525,"type":"switch","thickness":20,"color":4,"animation":null},{"x":775,"y":525,"type":"curve","thickness":20,"color":5,"animation":null},{"x":775,"y":212.5,"type":"curve","thickness":20,"color":5,"animation":null},{"x":225,"y":212.5,"type":"curve","thickness":20,"color":5,"animation":null},{"x":225,"y":525,"type":"curve","thickness":20,"color":5,"animation":null},{"x":225,"y":525,"type":"switch","thickness":20,"color":5,"animation":null},{"x":250,"y":525,"type":"curve","thickness":20,"color":6,"animation":null},{"x":250,"y":250,"type":"curve","thickness":20,"color":6,"animation":null},{"x":750,"y":250,"type":"curve","thickness":20,"color":6,"animation":null},{"x":750,"y":525,"type":"curve","thickness":20,"color":6,"animation":null},{"x":750,"y":525,"type":"switch","thickness":20,"color":6,"animation":null},{"x":725,"y":525,"type":"curve","thickness":20,"color":7,"animation":null},{"x":725,"y":287.5,"type":"curve","thickness":20,"color":7,"animation":null},{"x":275,"y":287.5,"type":"curve","thickness":20,"color":7,"animation":null},{"x":275,"y":525,"type":"curve","thickness":20,"color":7,"animation":null},{"x":275,"y":525,"type":"switch","thickness":20,"color":7,"animation":null},{"x":300,"y":525,"type":"curve","thickness":20,"color":8,"animation":null},{"x":300,"y":325,"type":"curve","thickness":20,"color":8,"animation":null},{"x":700,"y":325,"type":"curve","thickness":20,"color":8,"animation":null},{"x":700,"y":525,"type":"curve","thickness":20,"color":8,"animation":null},{"x":700,"y":525,"type":"switch","thickness":20,"color":9,"animation":null},{"x":675,"y":525,"type":"curve","thickness":20,"color":9,"animation":null},{"x":675,"y":362.5,"type":"curve","thickness":20,"color":9,"animation":null},{"x":325,"y":362.5,"type":"curve","thickness":20,"color":9,"animation":null},{"x":325,"y":525,"type":"curve","thickness":20,"color":9,"animation":null},{"x":325,"y":525,"type":"switch","thickness":20,"color":9,"animation":null},{"x":500,"y":525,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":true}],"fusespeed":250,"name":"#29: Somewhere Under the Rainbow"},
			//#30: Bass Drop
			{"tuttext":["","","",""],"pts":[{"x":200,"y":200,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":false},{"x":200,"y":400,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":325,"y":400,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":325,"y":350,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":350,"y":350,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":350,"y":450,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":375,"y":450,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":375,"y":300,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":400,"y":300,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":400,"y":500,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":425,"y":500,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":425,"y":250,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":450,"y":250,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":450,"y":550,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":475,"y":550,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":475,"y":200,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":500,"y":200,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":500,"y":600,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":525,"y":600,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":525,"y":250,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":550,"y":250,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":550,"y":550,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":575,"y":550,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":575,"y":300,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":600,"y":300,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":600,"y":500,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":625,"y":500,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":625,"y":350,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":650,"y":350,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":650,"y":450,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":675,"y":450,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":675,"y":400,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":800,"y":400,"type":"midpoint","thickness":20,"color":0,"animation":null},{"x":800,"y":600,"type":"checkpoint","thickness":20,"color":0,"animation":null,"filled":false}],"fusespeed":150,"name":"#30: Bass Drop"}
		];
		var frame = 0;
		var canvas = document.getElementById('game');
		var ctx = canvas.getContext('2d');
		var mouseX = 0;
		var mouseY = 0;
		ctx.lineCap = 'round';
		ctx.strokeStyle = 'DodgerBlue';
		ctx.lineJoin = 'round';

		var checkpoint = {
			lvl: 0,
			pt: 0,
			fill: false
		};
		var state = {
			ui: 'lvlselect',
			gameplay: {
				stage: 0,
				fuseoffset: 0,
				oncheckpoint: false,
				ghostrecord: {
				},
				lastcolor: -1
			},
			lvledit: {
				lvleditdata: null,
				editpt: 0,
				lvledittext: 'Level editor',
				editstepsize: 50,
				showstepsize: false,
				editgrid: true
			},
			common: {
				lvlformatchecked: -1,
				lvlformatcorrect: true
			},
			lvlselect: {
				selectedlvl: 0,
				gamemode: 0,
				ongamemode: false,
				gamemodes: [
					'Normal',
					'Ghost Race',
					'Edit',
					'Edit new'
				]
			}
		};
		var constantstate = {
			latestunlocked: {
				lvl: 0,
				pt: 0
			},
			ghostrecords: []
		}
		var linecolors = [
			'DodgerBlue',
			'DeepPink',
			'green',
			'purple',
			'red',
			'orange',
			'gold',
			'green',
			'blue',
			'purple'
		]
		try {
			constantstate = JSON.parse(document.cookie)
		} catch {}

		if (!constantstate.latestunlocked || typeof(constantstate.latestunlocked.lvl) != "number" || typeof(constantstate.latestunlocked.pt) != "number") {
			constantstate.latestunlocked = {
				lvl: 0,
				pt: 0
			};
			saveconstantstate();
		}

		if (constantstate.latestunlocked.lvl > lvldata.length - 1) {
			state.lvlselect.selectedlvl = lvldata.length - 1;
		} else {
			state.lvlselect.selectedlvl = constantstate.latestunlocked.lvl;
		}

		function saveconstantstate() {
			document.cookie = JSON.stringify(constantstate);
		}

		var animations = {
			stage: {
				r: 0,
				g: 0,
				b: 0,
				a: 0
			}
		}
		//state.ui = 'gameplay';	// for debugging, comment out when there is a level select screen

		function getLines(ctx, text, maxWidth) {
			var words = text.split(" ");
			var lines = [];
			var currentLine = words[0];

			for (var i = 1; i < words.length; i++) {
				var word = words[i];
				var width = ctx.measureText(currentLine + " " + word).width;
				if (width < maxWidth) {
					currentLine += " " + word;
				} else {
					lines.push(currentLine);
					currentLine = word;
				}
			}
			lines.push(currentLine);
			return lines;
		}

		function drawWrappedText(txt, x, y, px, gap) {
			var lines = getLines(ctx, txt, canvas.width - 200);
			var absy = y;//(y - (lines.length * (px + gap))) + gap;
			for (var i = 0; i < lines.length; i++) {
				ctx.fillText(lines[i], x, absy + (i * (px + gap)));
			}
		}

		function doAnimation(animation, realvalue, r, g, b, a) {
			var cr;
			var cg;
			var cb;
			var ca;
			animation.r += (r - animation.r) / 10;
			animation.g += (g - animation.g) / 10;
			animation.b += (b - animation.b) / 10;
			animation.a += (a - animation.a) / 10;
			cr = animation.r;
			cg = animation.g;
			cb = animation.b;
			ca = animation.a;
			return "rgba(" + cr + ", " + cg + ", " + cb + ", " + (ca / 255) + ")";
		}

		function distance(a, b) {
		  return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));
		}

		function pixelstoward(a, b, px) {
		  var dist = distance(a, b);
		  var rise = (b.y - a.y) / dist;
		  var run = (b.x - a.x) / dist;
		  var newa = {};
		  newa.x = a.x + (run * px);
		  newa.y = a.y + (rise * px);
		  return newa;
		}

		function calculatecubicbezier(curve, t) {
		  var a = pixelstoward(curve[0], curve[1], distance(curve[0], curve[1]) * t);
		  var b = pixelstoward(curve[1], curve[2], distance(curve[1], curve[2]) * t);
		  return pixelstoward(a, b, distance(a, b) * t);
		}

		function calculatecurve(curve, t) {
			if (curve.length == 3) {
				return calculatecubicbezier(curve, t);
			} else if (curve.length > 3) {
				var refinedcurve = [];
				for (i = 0; i < curve.length - 1; i++) {
					var thispt = curve[i];
					var nextpt = curve[i + 1];
					refinedcurve.push(pixelstoward(thispt, nextpt, distance(thispt, nextpt) * t));
				}
				return calculatecurve(refinedcurve, t);
			}
		}

		function addcubicbeziercurve(path, curve, res) {
			for (var i = 0; i <= 1; i += res) {
				path.push(calculatecubicbezier(curve, i));
			}
		}

		function addcurve(path, curve, res) {
			var pathpx = measurepath(curve);
			var pointcount = (pathpx / res);
			for (var i = 0; i <= 1; i += 1 / pointcount) {
				var pt = calculatecurve(curve, i);
				pt.color = curve[curve.length - 1].color;
				path.push(pt);
			}
		}

		function offsetpath(pathpoints, offset) {
		  var newpathpoints = [];
		  for (var i = 0; i < pathpoints.length; i++) {
		    var pathpoint = pathpoints[i];
				var current = newpathpoints[newpathpoints.length - 1];
				if (!current) {
					current = [];
				}
				if (pathpoint.type == "curve" && current.length > 0) {
					current.push({x: pathpoint.x, y: pathpoint.y, type: pathpoint.type, color: pathpoint.color});
				} else if (pathpoint.type == "curve") {
					newpathpoints.push([{x: pathpoint.x, y: pathpoint.y, type: pathpoint.type, color: pathpoint.color}]);
				} else if (current.length > 0) {
					if (current.length >= 3) {
						newpathpoints.splice(newpathpoints.length - 1, 1);
						addcurve(newpathpoints, current, 10);
						newpathpoints.push({x: pathpoint.x, y: pathpoint.y, type: pathpoint.type, color: pathpoint.color});
					} else {
						newpathpoints.splice(newpathpoints.length - 1, 1);
						for (ii = 0; ii < current.length; ii++) {
							newpathpoints.push(current[ii]);
						}
						newpathpoints.push({x: pathpoint.x, y: pathpoint.y, type: pathpoint.type, color: pathpoint.color});
					}
				} else {
					newpathpoints.push({x: pathpoint.x, y: pathpoint.y, type: pathpoint.type, color: pathpoint.color});
				}
		  }
			var current = newpathpoints[newpathpoints.length - 1];
			if (current.length > 0) {
				if (current.length >= 3) {
					newpathpoints.splice(newpathpoints.length - 1, 1);
					addcurve(newpathpoints, current, 10);
					newpathpoints.push({x: pathpoint.x, y: pathpoint.y, type: pathpoint.type, color: pathpoint.color});
				} else {
					newpathpoints.splice(newpathpoints.length - 1, 1);
					for (ii = 0; ii < current.length; ii++) {
						newpathpoints.push(current[ii]);
					}
					newpathpoints.push({x: pathpoint.x, y: pathpoint.y, type: pathpoint.type, color: pathpoint.color});
				}
			}
		  var offsetleft = offset;
		  for (var i = 0; i < newpathpoints.length - 1; i++) {
		    var pathpoint = newpathpoints[i];
		    var nextpathpoint = newpathpoints[i + 1];
		    var dist = distance(pathpoint, nextpathpoint);
		    if (offsetleft >= dist) {
		      pathpoint.throwaway = true;
		      offsetleft -= dist;
		    } else {
		      var moved = pixelstoward(pathpoint, nextpathpoint, offsetleft);
		      pathpoint.x = moved.x;
		      pathpoint.y = moved.y;
		      break;
		    }
		  }
		  for (var i = 0; i < newpathpoints.length; i++) {
		    var pathpoint = newpathpoints[i];
		    if (pathpoint.throwaway) {
		      newpathpoints.splice(i, 1);
		      i = -1; continue;
		    }
		  }
		  return newpathpoints;
		}

		function measurepath(path, uptopoint) {
			if (uptopoint == 0) {
				return 0;
			}
			measured = 0;
			for (var i = 0; i < path.length - 1; i++) {
				measured += distance(path[i], path[i + 1]);
				if (i + 1 == uptopoint) {
					break;
				}
			}
			return measured;
		}

		function checklvlformat(lvl, repair) {
			var formatcorrect = true;
			if (typeof(lvl.tuttext) != "object") {
				formatcorrect = false;
				if (repair) {
					lvl.tuttext = ["", "", "", ""];
				}
			}
			if (lvl.tuttext.length != 4) {
				formatcorrect = false;
				if (lvl.tuttext.length > 4 && repair) {
					lvl.tuttext.splice(4, lvl.tuttext.length - 4);
				} else if (repair) {
					var itemsneeded = 4 - lvl.tuttext.length;
					for (var i = 0; i < itemsneeded; i++) {
						itemsneeded.push("");
					}
				}
			}
			for (i = 0; i < 4; i++) {
				if (typeof(lvl.tuttext[i]) != "string") {
					formatcorrect = false;
					if (repair) {
						lvl.tuttext[i] = "";
					}
				}
			}
			if (typeof(lvl.pts) != "object" || lvl.length < 1) {
				formatcorrect = false;
				if (repair) {
					lvl.pts = [
						{
							x: 200,
							y: 400,
							type: 'checkpoint',
							thickness: 20
						},
					]
				}
			}
			for (i = 0; i < lvl.pts.length; i++) {
				var pt = lvl.pts[i];
				if (typeof(pt.x) != "number" || !pt.y || typeof(pt.y) != "number") {
					formatcorrect = false;
					if (repair) {
						lvl.pts.splice(i, 1);
						i--;
						continue;
					}
				}
				if (pt.type != "checkpoint" && pt.type != "midpoint" && pt.type != "curve" && pt.type != "switch") {
					formatcorrect = false;
					if (repair) {
						pt.type = "midpoint";
					}
				}
				if (typeof(pt.thickness) != "number" || pt.thickness < 1) {
					formatcorrect = false;
					if (repair) {
						pt.thickness = 20;
					}
				}
				if (typeof(pt.color) != "number" || pt.color < 0 || pt.color >= linecolors.length) {
					formatcorrect = false;
					if (repair) {
						pt.color = 0;
					}
				}
			}
			if (typeof(lvl.fusespeed) != "number" || lvl.fusespeed < 0) {
				formatcorrect = false;
				if (repair) {
					lvl.fusespeed = 0;
				}
			}
			if (!lvl.name || typeof(lvl.name) != "string") {
				formatcorrect = false;
				if (repair) {
					lvl.name = "Untitled Level";
				}
			}
			return formatcorrect;
		}

		function rgba(r, g, b, a) {
			return "rgba(" + r + ", " + b + ", " + g + ", " + a / 255 + ")";
		}

		function loop() {
			requestAnimationFrame(loop);
			var cursoronsomething = false;
			if (++frame >= 60) {
				frame = 0;
			}
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			if (state.ui == 'gameplay') {
				var lvl = lvldata[checkpoint.lvl];
				if (state.lvledit.lvleditdata && state.lvledit.lvleditdata != null) {
					lvl = state.lvledit.lvleditdata;
				}
				if (state.common.lvlformatchecked != checkpoint.lvl) {
					state.common.lvlformatcorrect = checklvlformat(lvl, false);
					state.common.lvlformatchecked = checkpoint.lvl;
				}
				if (!state.common.lvlformatcorrect) {
					ctx.textAlign = 'center';
					ctx.font = '100 40px Roboto';
					ctx.fillStyle = 'DodgerBlue';
					drawWrappedText("Level format was incorrect. The level editor can automatically repair this.", canvas.width / 2, canvas.height / 2, 40, 10);
					return;
				}
				var pts = lvl.pts;
				var fusespeed = lvl.fusespeed;
				ctx.strokeStyle = 'DodgerBlue';

				// draw midpoints, catalog checkpoints
				var beginoffset;
				var checkpts = [];
				var switchpts = [];
				for (var i = 0; i < pts.length; i++) {
					var pt = pts[i];
					if (pt.type == 'checkpoint') {
						if (!pt.animation) {
							pt.animation = {
								r: 30,
								g: 154,
								b: 255,
								a: 0,
								radius: 0
							}
						}
						checkpts.push(pt);
					} else if (pt.type == 'switch') {
						switchpts.push(pt);
					}
				}
				var curveless = offsetpath(pts, 0);
				var c = 0;
				//alert(JSON.stringify(curveless[0]));
				for (var i = 0; i < curveless.length; i++) {
					var pt = curveless[i];
					if (pt.type == 'checkpoint') {
						if (c == checkpoint.pt) {
							beginoffset = measurepath(curveless, i);
							break;
						}
						c++;
					}
				}
				var primarycheckpt = checkpts[checkpoint.pt];
				if (checkpoint.pt == checkpts.length - 1) {
					beginoffset = 0;
				}
				var drawnpoints = offsetpath(pts, state.gameplay.fuseoffset);
				if (state.gameplay.stage == 2 && drawnpoints.length > 1 && !(state.gameplay.fuseoffset >= beginoffset && state.gameplay.oncheckpoint)) {
					state.gameplay.fuseoffset += fusespeed / 60;
				} else if (state.gameplay.fuseoffset != beginoffset) {
					state.gameplay.fuseoffset -= (state.gameplay.fuseoffset - beginoffset) / 10;
				}
				ctx.lineWidth = pts[0].thickness;
				//ctx.beginPath();
				ctx.lineCap = 'round';
				if (state.gameplay.oncheckpoint) {
					state.gameplay.lastcolor = -1;
				}
				var currentcolor = drawnpoints[0].color;
				for (var i = 0; i < drawnpoints.length; i++) {
					var pt = drawnpoints[i];
					if (i > 0) {
						if (pt.color != currentcolor) {
							ctx.strokeStyle = linecolors[currentcolor];
							currentcolor = pt.color;
							ctx.stroke();
							if (ctx.isPointInStroke(mouseX, mouseY)) {
								if (state.gameplay.lastcolor == -1) {
									state.gameplay.lastcolor = pt.color;
								}
								if (state.gameplay.lastcolor == pt.color) {
									cursoronsomething = true;
								}
							}
							ctx.beginPath();
							ctx.moveTo(drawnpoints[i - 1].x, drawnpoints[i - 1].y);
							ctx.lineTo(pt.x, pt.y);
						} else {
							ctx.lineTo(pt.x, pt.y);
							if (ctx.isPointInStroke(mouseX, mouseY)) {
								if (state.gameplay.lastcolor == -1) {
									state.gameplay.lastcolor = pt.color;
								}
								if (state.gameplay.lastcolor == pt.color) {
									cursoronsomething = true;
								}
							}
						}
					} else {
						ctx.beginPath();
						ctx.moveTo(pt.x, pt.y);
					}
				}
				ctx.strokeStyle = linecolors[currentcolor];
				if (ctx.isPointInStroke(mouseX, mouseY)) {
					if (state.gameplay.lastcolor == -1) {
						state.gameplay.lastcolor = pt.color;
					}
					if (state.gameplay.lastcolor == pt.color) {
						cursoronsomething = true;
					}
				}
				ctx.stroke();
				ctx.lineWidth = 10;
				for (var i = 0; i < switchpts.length; i++) {
					var switchpt = switchpts[i];
					var size = pts[0].thickness / 2;
					var left = switchpt.x - size;
					var right = switchpt.x + size;
					var top = switchpt.y - size;
					var bottom = switchpt.y + size;
					ctx.fillStyle = 'black';
					ctx.beginPath();
					//ctx.arc(switchpt.x, switchpt.y, pts[0].thickness / 2, 0, 2 * Math.PI);
					ctx.moveTo(left, top);
					ctx.lineTo(right, top);
					ctx.lineTo(right, bottom);
					ctx.lineTo(left, bottom);
					ctx.closePath();
					ctx.fill();
					if (ctx.isPointInPath(mouseX, mouseY)) {
						state.gameplay.lastcolor = -1;
					}
				}
				for (var i = 0; i < checkpts.length; i++) {
					var checkpt = checkpts[i];
					if (i != checkpoint.pt) {
						ctx.fillStyle = '#FFFFFF';
						ctx.strokeStyle = 'DodgerBlue';
						ctx.beginPath();
						ctx.arc(checkpt.x, checkpt.y, 40, 0, 2 * Math.PI);
						if (ctx.isPointInPath(mouseX, mouseY)) {
							cursoronsomething = true;
							if (state.gameplay.stage == 2) {
								if (i == checkpts.length - 1) {
									state.gameplay.stage = 3;
									if (checkpoint.lvl + 1 > constantstate.latestunlocked.lvl && !state.lvledit.lvleditdata) {
										constantstate.latestunlocked.lvl = checkpoint.lvl + 1;
										constantstate.latestunlocked.pt = 0;
										saveconstantstate();
									}
								}
								checkpoint.pt = i;
								if (constantstate.latestunlocked.lvl == checkpoint.lvl && checkpoint.pt > constantstate.latestunlocked.pt && !state.lvledit.lvleditdata) {
									constantstate.latestunlocked.pt = checkpoint.pt
									saveconstantstate();
								}
								i = -1; continue;
							}
						}
						ctx.fill();
						ctx.stroke();
						if (i < checkpoint.pt) {
							checkpt.filled = true;
						} else {
							checkpt.filled = false;
						}
						var a = 0;
						if (checkpt.filled) {
							a = 40;
						}
						checkpt.animation.radius += (a - checkpt.animation.radius) / 10
						ctx.beginPath();
						ctx.arc(checkpt.x, checkpt.y, checkpt.animation.radius, 0, 2 * Math.PI);
						ctx.fillStyle = 'DodgerBlue';
						ctx.fill();
						if (checkpt.filled) {
							ctx.beginPath();
							ctx.lineWidth = 5;
							ctx.strokeStyle = 'white';
							ctx.lineCap = 'butt';
							ctx.lineJoin = 'miter';
							ctx.beginPath();
							ctx.moveTo(checkpt.x - 17, checkpt.y);
							ctx.lineTo(checkpt.x, checkpt.y + 15);
							ctx.lineTo(checkpt.x + 17, checkpt.y - 15);
							ctx.stroke();
							ctx.lineCap = 'round';
							ctx.lineJoin = 'round';
							ctx.lineWidth = 10;
							ctx.stroke();
						}
					}
				}
				var r = 0;
				var g = 0;
				var b = 0;
				var a = 0;
				if (state.gameplay.stage == 0) {
					a = 70;
				} else if (state.gameplay.stage == 4) {
					r = 255;
					a = 70;
				}
				ctx.fillStyle = doAnimation(animations.stage, state.gameplay.stage, r, g, b, a);
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				for (var i = 0; i < checkpts.length; i++) {
					var checkpt = checkpts[i];
					if (i == checkpoint.pt) {
						ctx.fillStyle = '#FFFFFF';
						ctx.strokeStyle = 'DodgerBlue';
						ctx.beginPath();
						ctx.arc(checkpt.x, checkpt.y, 40, 0, 2 * Math.PI);
						if (ctx.isPointInPath(mouseX, mouseY)) {
							cursoronsomething = true;
							state.gameplay.oncheckpoint = true;
						} else if (cursoronsomething && state.gameplay.stage == 1) {
							state.gameplay.stage = 2;
							//state.gameplay.fuseoffset = 0;
							state.gameplay.oncheckpoint = false;
						} else {
							state.gameplay.oncheckpoint = false;
						}
						if ((state.gameplay.stage == 0 || state.gameplay.stage == 4) && ctx.isPointInPath(mouseX, mouseY)) {
							state.gameplay.stage = 1;
						}
						ctx.fill();
						ctx.stroke();
						if (state.gameplay.stage == 2 || state.gameplay.stage == 3) {
							checkpt.filled = true;
						} else {
							checkpt.filled = false;
						}
						var a = 0;
						if (checkpt.filled) {
							a = 40;
						}
						checkpt.animation.radius += (a - checkpt.animation.radius) / 10
						ctx.beginPath();
						ctx.arc(checkpt.x, checkpt.y, checkpt.animation.radius, 0, 2 * Math.PI);
						ctx.fillStyle = 'DodgerBlue';
						ctx.fill();
						if (checkpt.filled) {
							ctx.beginPath();
							ctx.lineWidth = 5;
							ctx.strokeStyle = 'white';
							ctx.lineCap = 'butt';
							ctx.lineJoin = 'miter';
							ctx.beginPath();
							ctx.moveTo(checkpt.x - 17, checkpt.y);
							ctx.lineTo(checkpt.x, checkpt.y + 15);
							ctx.lineTo(checkpt.x + 17, checkpt.y - 15);
							ctx.stroke();
							ctx.lineCap = 'round';
							ctx.lineJoin = 'round';
							ctx.lineWidth = 10;
							ctx.stroke();
						}
					}
				}
				var tutmsg;
				if (state.gameplay.stage == 4) {
					tutmsg = "Try again!";
				} else {
					tutmsg = lvl.tuttext[state.gameplay.stage];
				}
				if (!cursoronsomething && state.gameplay.stage >= 1 && state.gameplay.stage != 3) {
					state.gameplay.stage = 4;
				}

				ctx.textAlign = 'center';
				ctx.font = '100 40px Roboto';
				ctx.fillStyle = 'DodgerBlue';
				drawWrappedText(tutmsg, canvas.width / 2, canvas.height / 2 + 280, 40, 10);
				drawWrappedText(lvl.name, canvas.width / 2, canvas.height / 2 - 250, 40, 10);
				//ctx.fillText(tutmsg, canvas.width / 2, canvas.height / 2 + 250);
			} else if (state.ui === 'lvledit') {
				lvl = state.lvledit.lvleditdata;
				if (state.common.lvlformatchecked != checkpoint.lvl) {
					state.common.lvlformatcorrect = checklvlformat(lvl, true);
					if (!state.common.lvlformatcorrect) {
						state.lvledit.lvledittext = "Format was incorrect, editor automatically repaired it";
						window.setTimeout(function() {state.lvledit.lvledittext = "Level editor"}, 2000);
						state.common.lvlformatcorrect = true;
					}
					state.common.lvlformatchecked = checkpoint.lvl;
				} else if (!state.common.lvlformatcorrect) {
					state.common.lvlformatcorrect = checklvlformat(lvl, true);
					state.common.lvlformatcorrect = true;
					state.common.lvlformatchecked = checkpoint.lvl;
					state.lvledit.lvledittext = "Format was incorrect, editor automatically repaired it";
					window.setTimeout(function() {state.lvledit.lvledittext = "Level editor"}, 2000);
				}

				if (state.lvledit.editgrid) {
					ctx.lineWidth = 1;
					ctx.strokeStyle = '#DDDDDD';
					for (x = 200 + state.lvledit.editstepsize; x < 800; x += state.lvledit.editstepsize) {
						ctx.beginPath();
						ctx.moveTo(x, 200);
						ctx.lineTo(x, 600);
						ctx.stroke();
					}
					for (y = 200 + state.lvledit.editstepsize; y < 600; y += state.lvledit.editstepsize) {
						ctx.beginPath();
						ctx.moveTo(200, y);
						ctx.lineTo(800, y);
						ctx.stroke();
					}
				}

				var pts = lvl.pts;
				var fusespeed = lvl.fusespeed;
				ctx.strokeStyle = 'DodgerBlue';
				var checkpts = [];
				var curvepts = [];
				var switchpts = [];
				for (var i = 0; i < pts.length; i++) {
					var pt = pts[i];
					if (pt.type == 'checkpoint') {
						checkpts.push(pt);
					} else if (pt.type == 'curve') {
						curvepts.push(pt);
					} else if (pt.type == 'switch') {
						switchpts.push(pt);
					}
				}
				var primarycheckpt = checkpts[checkpoint.pt];
				var drawnpoints = offsetpath(pts, 0);
				ctx.lineWidth = pts[0].thickness;
				//ctx.beginPath();
				ctx.lineCap = 'round';
				var currentcolor = drawnpoints[0].color;
				for (var i = 0; i < drawnpoints.length; i++) {
					var pt = drawnpoints[i];
					if (i > 0) {
						if (pt.color != currentcolor) {
							ctx.strokeStyle = linecolors[currentcolor];
							currentcolor = pt.color;
							ctx.stroke();
							ctx.beginPath();
							ctx.moveTo(drawnpoints[i - 1].x, drawnpoints[i - 1].y);
							ctx.lineTo(pt.x, pt.y);
						} else {
							ctx.lineTo(pt.x, pt.y);
						}
					} else {
						ctx.beginPath();
						ctx.moveTo(pt.x, pt.y);
					}
				}
				ctx.strokeStyle = linecolors[currentcolor];
				ctx.stroke();
				ctx.lineWidth = 10;
				for (var i = 0; i < checkpts.length; i++) {
					checkpt = checkpts[i];
					ctx.fillStyle = '#FFFFFF';
					ctx.strokeStyle = 'DodgerBlue';
					ctx.beginPath();
					ctx.arc(checkpt.x, checkpt.y, 40, 0, 2 * Math.PI);
					ctx.fill();
					ctx.stroke();
				}
				var selectedpt = pts[state.lvledit.editpt];
				if (curvepts.length > 1 && selectedpt.type == "curve") {
					var currentcurvebeginpt;
					for (var i = state.lvledit.editpt; pts[i].type == "curve"; i--) {
						currentcurvebeginpt = i;
					}
					ctx.strokeStyle = '#00000088';
					ctx.lineWidth = 5;
					ctx.beginPath();
					ctx.moveTo(pts[currentcurvebeginpt].x, pts[currentcurvebeginpt].y);
					for (i = currentcurvebeginpt + 1; pts[i] && pts[i].type == "curve"; i++) {
						var curvept = pts[i];
						ctx.lineTo(curvept.x, curvept.y);
					}
					ctx.stroke();
				}
				ctx.fillStyle = 'black';
				if (selectedpt.type == "curve") {
					ctx.fillStyle = 'green';
				}
				ctx.beginPath();
				ctx.arc(selectedpt.x, selectedpt.y, 20, 0, 2 * Math.PI);
				ctx.fill();
				if (selectedpt.x == 200 || selectedpt.x == 500) {
					ctx.beginPath();
					ctx.arc(selectedpt.x - 20, selectedpt.y, 10, 0, 2 * Math.PI);
					ctx.fill();
				}
				if (selectedpt.x == 800 || selectedpt.x == 500) {
					ctx.beginPath();
					ctx.arc(selectedpt.x + 20, selectedpt.y, 10, 0, 2 * Math.PI);
					ctx.fill();
				}
				if (selectedpt.y == 200 || selectedpt.y == 400) {
					ctx.beginPath();
					ctx.arc(selectedpt.x, selectedpt.y - 20, 10, 0, 2 * Math.PI);
					ctx.fill();
				}
				if (selectedpt.y == 600 || selectedpt.y == 400) {
					ctx.beginPath();
					ctx.arc(selectedpt.x, selectedpt.y + 20, 10, 0, 2 * Math.PI);
					ctx.fill();
				}
				if (state.lvledit.showstepsize) {
					if (state.lvledit.editstepsize == 50) {
						ctx.fillStyle = '#00000088';
					} else if (state.lvledit.editstepsize < 25) {
						ctx.fillStyle = '#FFFFFF55';
					} else {
						ctx.fillStyle = '#00000055';
					}
					ctx.beginPath();
					ctx.arc(selectedpt.x + state.lvledit.editstepsize, selectedpt.y, 10, 0, 2 * Math.PI);
					ctx.fill();
					ctx.beginPath();
					ctx.arc(selectedpt.x - state.lvledit.editstepsize, selectedpt.y, 10, 0, 2 * Math.PI);
					ctx.fill();
					ctx.beginPath();
					ctx.arc(selectedpt.x, selectedpt.y + state.lvledit.editstepsize, 10, 0, 2 * Math.PI);
					ctx.fill();
					ctx.beginPath();
					ctx.arc(selectedpt.x, selectedpt.y - state.lvledit.editstepsize, 10, 0, 2 * Math.PI);
					ctx.fill();
				}
				for (var i = 0; i < pts.length; i++) {
					var switchpt = pts[i];
					if (switchpt.type == "switch") {
						var size = pts[0].thickness / 2;
						var left = switchpt.x - size;
						var right = switchpt.x + size;
						var top = switchpt.y - size;
						var bottom = switchpt.y + size;
						if (state.lvledit.editpt == i) {
							ctx.fillStyle = 'white';
						} else {
							ctx.fillStyle = 'black';
						}
						ctx.beginPath();
						//ctx.arc(switchpt.x, switchpt.y, pts[0].thickness / 2, 0, 2 * Math.PI);
						ctx.moveTo(left, top);
						ctx.lineTo(right, top);
						ctx.lineTo(right, bottom);
						ctx.lineTo(left, bottom);
						ctx.closePath();
						ctx.fill();
					}
				}

				ctx.textAlign = 'center';
				ctx.font = '100 40px Roboto';
				ctx.fillStyle = 'DodgerBlue';
				drawWrappedText(state.lvledit.lvledittext, canvas.width / 2, canvas.height / 2 + 280, 40, 10);
				drawWrappedText(lvl.name, canvas.width / 2, canvas.height / 2 - 250, 40, 10);
			} else if (state.ui == "lvlselect") {
				var selectedlvl = lvldata[state.lvlselect.selectedlvl];
				ctx.font = '100 40px Roboto';
				ctx.fillStyle = 'black';
				var titleY = canvas.height / 2 - ((state.lvlselect.selectedlvl + 1) * 50);
				if (titleY < 50) {
					titleY = 50;
				}
				var levelsX = 25;
				ctx.textAlign = 'left';
				ctx.fillText('Level Select', levelsX, titleY);
				ctx.textAlign = 'left';
				ctx.fillStyle = 'DodgerBlue';
				if (state.lvlselect.selectedlvl > constantstate.latestunlocked.lvl) {
					ctx.fillStyle = 'Crimson';
				}
				ctx.fillText(selectedlvl.name, levelsX, canvas.height / 2);
				ctx.lineWidth = 2.5;
				ctx.lineCap = 'butt';
				if (state.lvlselect.selectedlvl > constantstate.latestunlocked.lvl) {
					ctx.strokeStyle = 'Gray';
					ctx.beginPath();
					ctx.moveTo(levelsX - 10, canvas.height / 2 - 40);
					ctx.lineTo(levelsX - 10, canvas.height / 2 + 10);
				}
				if (state.lvlselect.selectedlvl < constantstate.latestunlocked.lvl) {
					ctx.strokeStyle = '#00AA55';
					ctx.beginPath();
					ctx.moveTo(levelsX - 10, canvas.height / 2 - 40);
					ctx.lineTo(levelsX - 10, canvas.height / 2 + 10);
				}
				if (state.lvlselect.selectedlvl == constantstate.latestunlocked.lvl) {
					ctx.strokeStyle = 'DodgerBlue';
					ctx.beginPath();
					ctx.moveTo(levelsX - 10, canvas.height / 2 - 40);
					ctx.lineTo(levelsX - 10, canvas.height / 2 + 10);
				}
				if (!state.lvlselect.ongamemode) {
					ctx.stroke();
				}
				//ctx.fillStyle = 'Gray';
				for (var i = state.lvlselect.selectedlvl - 1; i >= 0; i--) {
					var difference = i - state.lvlselect.selectedlvl;
					if (state.lvlselect.ongamemode) {
						ctx.fillStyle = rgba(100, 100, 100, 130 - Math.abs(difference) * 30);
					} else {
						ctx.fillStyle = rgba(100, 100, 100, 255 - Math.abs(difference) * 30);
					}
					var y = canvas.height / 2 + difference * 50
					ctx.fillText(lvldata[i].name, levelsX, y);
				}
				for (var i = state.lvlselect.selectedlvl + 1; i < lvldata.length; i++) {
					var difference = i - state.lvlselect.selectedlvl;
					var y = canvas.height / 2 + difference * 50
					if (state.lvlselect.ongamemode) {
						ctx.fillStyle = rgba(100, 100, 100, 130 - Math.abs(difference) * 30);
					} else {
						ctx.fillStyle = rgba(100, 100, 100, 255 - Math.abs(difference) * 30);
					}
					ctx.fillText(lvldata[i].name, levelsX, y);
				}
				ctx.fillStyle = 'black';
				var gamemodesX = canvas.width / 2 + 230
				ctx.fillText('Game Mode', gamemodesX, canvas.height / 2 - 50);
				var gamemodes = state.lvlselect.gamemodes;
				for (var i = 0; i < gamemodes.length; i++) {
					var y = canvas.height / 2 + i * 50;
					if (i == state.lvlselect.gamemode) {
						ctx.fillStyle = 'DodgerBlue'
						ctx.strokeStyle = 'DodgerBlue';
						if (state.lvlselect.ongamemode) {
							ctx.beginPath();
							ctx.moveTo(gamemodesX - 10, y - 40);
							ctx.lineTo(gamemodesX - 10, y + 10);
							ctx.stroke();
						}
					} else {
						if (state.lvlselect.ongamemode) {
							ctx.fillStyle = rgba(100, 100, 100, 255);
						} else {
							ctx.fillStyle = rgba(100, 100, 100, 100);
						}
					}
					ctx.fillText(gamemodes[i], gamemodesX, y);
				}
			}
		}

		canvas.addEventListener('mousemove', function(e) {
			var rect = canvas.getBoundingClientRect();
			mouseX = e.clientX - rect.left;
			mouseY = e.clientY - rect.top;
			//alert(mouseX);
		});
		document.addEventListener('keydown', function(e) {
			if (e.which === 32 && state.gameplay.stage == 3) {
				//alert('space');
				if (state.lvledit.lvleditdata) {
					checkpoint.pt = 0;
					state.gameplay.stage = 0;
					return;
				}
				if (checkpoint.lvl == lvldata.length - 1) {
					state.ui = 'lvlselect';
					state.lvledit.lvleditdata = null;
					state.gameplay.stage = 0;
					state.lvlselect.selectedlvl = checkpoint.lvl;
				}
				checkpoint.pt = 0;
				checkpoint.lvl++;
				state.gameplay.stage = 0;
				if (checkpoint.lvl > lvldata.length - 1) {
					checkpoint.lvl = 0;
				}
			} else if (e.which === 76) {
				state.ui = 'lvlselect';
				state.lvledit.lvleditdata = null;
				state.gameplay.stage = 0;
				state.lvlselect.selectedlvl = checkpoint.lvl;
			} else if (e.which === 80 && state.lvledit.lvleditdata) {
				if (state.ui == 'gameplay') {
					state.ui = 'lvledit';
				} else {
					state.ui = 'gameplay';
					state.gameplay.stage = 0;
					checkpoint.pt = 0;
				}
			}
			if (state.ui == 'lvlselect') {
				if (e.which === 87 || e.which === 38) {
					if (state.lvlselect.ongamemode) {
						state.lvlselect.gamemode--;
					} else {
						state.lvlselect.selectedlvl--;
					}
				} else if (e.which === 83 || e.which === 40) {
					if (state.lvlselect.ongamemode) {
						state.lvlselect.gamemode++;
					} else {
						state.lvlselect.selectedlvl++;
					}
				} else if (e.which === 13) {
					if (state.lvlselect.gamemode == 0) {
						if (state.lvlselect.selectedlvl == constantstate.latestunlocked.lvl) {
							checkpoint.lvl = state.lvlselect.selectedlvl;
							checkpoint.pt = constantstate.latestunlocked.pt;
							state.lvledit.lvleditdata = null;
							state.gameplay.stage = 0;
							state.ui = 'gameplay';
						} else if (state.lvlselect.selectedlvl < constantstate.latestunlocked.lvl) {
							checkpoint.lvl = state.lvlselect.selectedlvl;
							checkpoint.pt = 0;
							state.lvledit.lvleditdata = null;
							state.gameplay.stage = 0;
							state.ui = 'gameplay';
						}
					} else if (state.lvlselect.gamemode == 2) {
						state.lvledit.lvleditdata = lvldata[state.lvlselect.selectedlvl];
						checkpoint.lvl = state.lvlselect.selectedlvl;
						state.ui = 'lvledit';
					} else if (state.lvlselect.gamemode == 3) {
						state.ui = 'lvledit';
						state.lvledit.lvleditdata = {
							tuttext: ['', '', '', ''],
							pts: [
								{
									x: 200,
									y: 400,
									type: 'checkpoint',
									thickness: 20,
									color: 0
								},
							],
							fusespeed: 0,
							name: 'Untitled Level'
						};
						checkpoint.lvl = 0;
					}
				} else if (e.which === 65 || e.which === 68 || e.which === 37 || e.which === 39) {
					state.lvlselect.ongamemode = !state.lvlselect.ongamemode;
				}
				if (state.lvlselect.selectedlvl < 0) {
					state.lvlselect.selectedlvl = lvldata.length - 1;
				}
				if (state.lvlselect.selectedlvl > lvldata.length - 1) {
					state.lvlselect.selectedlvl = 0;
				}
				if (state.lvlselect.gamemode > state.lvlselect.gamemodes.length - 1) {
					state.lvlselect.gamemode = 0;
				}
				if (state.lvlselect.gamemode < 0) {
					state.lvlselect.gamemode = state.lvlselect.gamemodes.length - 1;
				}
			}
			if (state.ui == 'lvledit') {
				var pts = state.lvledit.lvleditdata.pts;
				var tuttext = state.lvledit.lvleditdata.tuttext;
				var selectedpt = pts[state.lvledit.editpt];
				if (e.which === 37) {
					state.lvledit.editpt--;
				} else if (e.which === 39) {
					state.lvledit.editpt++;
				} else if (e.which === 87) {
					selectedpt.y -= state.lvledit.editstepsize;
				} else if (e.which === 83) {
					selectedpt.y += state.lvledit.editstepsize;
				} else if (e.which === 65) {
					selectedpt.x -= state.lvledit.editstepsize;
				} else if (e.which === 68) {
					selectedpt.x += state.lvledit.editstepsize;
				} else if (e.which === 187) {
					type = 'midpoint';
					if (selectedpt.type == 'curve') {
						type = 'curve';
					}
					pts.splice(state.lvledit.editpt + 1, 0, {
						x: selectedpt.x,
						y: selectedpt.y,
						type: type,
						thickness: 20,
						color: selectedpt.color
					});
					state.lvledit.editpt++;
				} else if (e.which === 189) {
					if (pts.length > 1) {
						pts.splice(state.lvledit.editpt, 1);
					}
					state.lvledit.editpt--;
				} else if (e.which === 67) {
					selectedpt.type = 'checkpoint';
				} else if (e.which === 77) {
					selectedpt.type = 'midpoint';
				} else if (e.which === 84) {
					var p = Number(prompt('thickness'));
					if (p == null || p < 1) {
						return;
					}
					pts[0].thickness = p;
				} else if (e.which === 48) {
					var p = prompt('stage 0 tuttext');
					if (p == null) {
						return;
					}
					tuttext[0] = p;
				} else if (e.which === 49) {
					var p = prompt('stage 1 tuttext');
					if (p == null) {
						return;
					}
					tuttext[1] = p;
				} else if (e.which === 50) {
					var p = prompt('stage 2 tuttext');
					if (p == null) {
						return;
					}
					tuttext[2] = p;
				} else if (e.which === 51) {
					var p = prompt('stage 3 tuttext');
					if (p == null) {
						return;
					}
					tuttext[3] = p;
				} else if (e.which === 70) {
					var p = Number(prompt('fuse speed'));
					if (p == null || p < 0) {
						return;
					}
					state.lvledit.lvleditdata.fusespeed = p;
				} else if (e.which === 74) {
					for (var i = 0; i < pts.length; i++) {
						pts[i].animation = null;
					}
					navigator.clipboard.writeText(JSON.stringify(state.lvledit.lvleditdata));
					state.lvledit.lvledittext = 'JSON saved, copied to clipboard'
					window.setTimeout(function() {state.lvledit.lvledittext = 'Level editor'}, 2000);
				} else if (e.which === 79) {
					var json = prompt('Level data');
					if (json == null) {
						return;
					}
					var loadedlvl;
					try {
						loadedlvl = JSON.parse(json);
					} catch {
						alert('Failed to parse level JSON');
						return;
					}
					state.lvledit.lvleditdata = loadedlvl;
					state.lvledit.lvledittext = 'JSON loaded';
					state.common.lvlformatchecked = -1;
					window.setTimeout(function() {state.lvledit.lvledittext = 'Level editor'}, 2000);
				} else if (e.which === 78) {
					var name = prompt('Name');
					if (name == null || !name) {
						return;
					}
					state.lvledit.lvleditdata.name = name;
				} else if (e.which === 190) {
					if (state.lvledit.showstepsize) {
						state.lvledit.editstepsize *= 2;
					} else {
						state.lvledit.showstepsize = true;
					}
					return;
				} else if (e.which === 188) {
					if (state.lvledit.showstepsize) {
						state.lvledit.editstepsize /= 2;
					} else {
						state.lvledit.showstepsize = true;
					}
					return;
				} else if (e.which === 71) {
					state.lvledit.editgrid = !state.lvledit.editgrid;
				} else if (e.which === 81) {
					selectedpt.type = 'curve';
				} else if (e.which === 82) {
					if (selectedpt.color == 0 || selectedpt.color == null || !selectedpt.color) {
						selectedpt.color = 1;
					} else {
						selectedpt.color++;
					}
				} else if (e.which === 90) {
					selectedpt.type = 'switch';
				}
				if (selectedpt.color >= linecolors.length) {
					selectedpt.color = 0;
				}
				if (state.lvledit.editpt < 0) {
					state.lvledit.editpt = pts.length - 1;
				}
				if (state.lvledit.editpt >= pts.length) {
					state.lvledit.editpt = 0;
				}
				state.lvledit.showstepsize = false;
			}
		});
		requestAnimationFrame(loop);
		</script>


</body></html>
